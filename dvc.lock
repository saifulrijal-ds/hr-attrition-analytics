schema: '2.0'
stages:
  generate_data:
    cmd: python src/stages/data_generation.py
    deps:
    - path: src/data/data_generator.py
      hash: md5
      md5: 03975e985f012f13d569878df4f0a9b7
      size: 69080
    - path: src/stages/data_generation.py
      hash: md5
      md5: a6498f1dd34706e8ba2c443b70ef124f
      size: 2266
    params:
      params.yaml:
        attrition_scenarios:
          normal:
            rate: 0.5
            description: Normal market conditions
            is_active: true
          low_stress:
            rate: 0.35
            description: Low competition, high retention period
            is_active: false
          high_stress:
            rate: 0.65
            description: High competition or restructuring period
            is_active: false
        company:
          name: BFI Finance Indonesia
          num_employees: 4000
          historical_years: 5
          random_seed: 42
    outs:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: 9cae3d3c80af127766f869a31790280f
      size: 1189834
    - path: data/stages/raw/exit_interviews.csv
      hash: md5
      md5: 3a777d62cb214f39a5c4fe2b56cf49a7
      size: 726229
    - path: data/stages/raw/metadata.yaml
      hash: md5
      md5: f1e21625aa066aea2424180b9b9bc2d5
      size: 235
    - path: data/stages/raw/performance.csv
      hash: md5
      md5: 004cda65827b3a85be671f05194cfa84
      size: 2490107
    - path: data/stages/raw/promotions.csv
      hash: md5
      md5: d0ee89e030c4d86839494cd8a7872086
      size: 663081
    - path: data/stages/raw/recruitment_costs.csv
      hash: md5
      md5: d3cbafe4148319ba5d11f2297c82e81a
      size: 983
    - path: data/stages/raw/surveys.csv
      hash: md5
      md5: 20c861675f3e1f744f863f9a54c8e61b
      size: 4632343
    - path: data/stages/raw/training.csv
      hash: md5
      md5: 21b1ef9a0076b8d87b7a5cc79c90c080
      size: 2919664
  preprocess:
    cmd: python src/stages/data_preprocessing.py
    deps:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: 9cae3d3c80af127766f869a31790280f
      size: 1189834
    - path: src/stages/data_preprocessing.py
      hash: md5
      md5: f866dcc0b0087d197e896f4bdb25c64e
      size: 4738
    params:
      params.yaml:
        split:
          method: hire_date
          train_end_date: '2023-12-31'
          test_start_date: '2024-01-01'
    outs:
    - path: data/stages/preprocessed/split_metadata.yaml
      hash: md5
      md5: 40052185450a88274264802ae84259a4
      size: 201
    - path: data/stages/preprocessed/test_data.csv
      hash: md5
      md5: 4246c8b565a32cb72bf4db4b1d0ec291
      size: 277623
    - path: data/stages/preprocessed/train_data.csv
      hash: md5
      md5: 8236ed53ade4a8d0ee2031eb531904df
      size: 904820
