schema: '2.0'
stages:
  generate_data:
    cmd: python src/stages/data_generation.py
    deps:
    - path: src/data/data_generator.py
      hash: md5
      md5: 9a8672a58820cbaa3a5cbab8162048d0
      size: 69080
    - path: src/stages/data_generation.py
      hash: md5
      md5: a6498f1dd34706e8ba2c443b70ef124f
      size: 2266
    params:
      params.yaml:
        attrition_scenarios:
          normal:
            rate: 0.5
            description: Normal market conditions
            is_active: true
          low_stress:
            rate: 0.35
            description: Low competition, high retention period
            is_active: false
          high_stress:
            rate: 0.65
            description: High competition or restructuring period
            is_active: false
        company:
          name: BFI Finance Indonesia
          num_employees: 4000
          historical_years: 5
          random_seed: 42
    outs:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: 667cfd3c2da849a0874962ed4878faf2
      size: 1123092
    - path: data/stages/raw/exit_interviews.csv
      hash: md5
      md5: 0ec60b4eb3b5ff3df2a90baeec3bc8e0
      size: 240033
    - path: data/stages/raw/metadata.yaml
      hash: md5
      md5: 6dc0a77a46914f1d8425242d378f9a69
      size: 235
    - path: data/stages/raw/performance.csv
      hash: md5
      md5: ae6fa03d66d9c667283299b1f7d0f7ef
      size: 3016679
    - path: data/stages/raw/promotions.csv
      hash: md5
      md5: 5674d7e493a93864b4edbd9605367d4e
      size: 665466
    - path: data/stages/raw/recruitment_costs.csv
      hash: md5
      md5: 8ed945455d823b8475b9c3f18c9ecfbf
      size: 990
    - path: data/stages/raw/surveys.csv
      hash: md5
      md5: aaa5c4ecdeeab5ac473cea018cca910d
      size: 6866470
    - path: data/stages/raw/training.csv
      hash: md5
      md5: 63f7c0026a64e60d165b237d6cd4771a
      size: 3803223
  preprocess:
    cmd: python src/stages/data_preprocessing.py
    deps:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: 667cfd3c2da849a0874962ed4878faf2
      size: 1123092
    - path: src/stages/data_preprocessing.py
      hash: md5
      md5: f866dcc0b0087d197e896f4bdb25c64e
      size: 4738
    params:
      params.yaml:
        split:
          method: hire_date
          train_end_date: '2023-12-31'
          test_start_date: '2024-01-01'
    outs:
    - path: data/stages/preprocessed/split_metadata.yaml
      hash: md5
      md5: 984a8608fc77a14cc2f3f3a77512429b
      size: 203
    - path: data/stages/preprocessed/test_data.csv
      hash: md5
      md5: 93d41dab2191b24990c5d6a22a040c0b
      size: 268075
    - path: data/stages/preprocessed/train_data.csv
      hash: md5
      md5: 7f10dc5edfe2ee5f5af7759063f45dfb
      size: 844794
