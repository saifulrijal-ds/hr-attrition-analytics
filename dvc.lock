schema: '2.0'
stages:
  generate_data:
    cmd: python src/stages/data_generation.py
    deps:
    - path: src/data/data_generator.py
      hash: md5
      md5: 0f03dfac39a9c91647ba337b15576bd4
      size: 69080
    - path: src/stages/data_generation.py
      hash: md5
      md5: a6498f1dd34706e8ba2c443b70ef124f
      size: 2266
    params:
      params.yaml:
        attrition_scenarios:
          normal:
            rate: 0.5
            description: Normal market conditions
            is_active: false
          low_stress:
            rate: 0.35
            description: Low competition, high retention period
            is_active: false
          high_stress:
            rate: 0.65
            description: High competition or restructuring period
            is_active: true
        company:
          name: BFI Finance Indonesia
          num_employees: 4000
          historical_years: 5
          random_seed: 42
    outs:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: a0bb0f9800a91bfd0475718777999562
      size: 1201390
    - path: data/stages/raw/exit_interviews.csv
      hash: md5
      md5: 038755557e54d43d2a066e8201949006
      size: 817911
    - path: data/stages/raw/metadata.yaml
      hash: md5
      md5: e00b50e741c2a2876f1c1ac37177ed48
      size: 252
    - path: data/stages/raw/performance.csv
      hash: md5
      md5: 7530f6d526515d670011334ed4523158
      size: 2393842
    - path: data/stages/raw/promotions.csv
      hash: md5
      md5: 465f031424766888828bfb5c7a85437e
      size: 662394
    - path: data/stages/raw/recruitment_costs.csv
      hash: md5
      md5: e483b3011c71f8dd6da1b0dbec698de5
      size: 975
    - path: data/stages/raw/surveys.csv
      hash: md5
      md5: faaf8017b3e6a42298feffb8c4b6c1a5
      size: 4199155
    - path: data/stages/raw/training.csv
      hash: md5
      md5: 46c10072bd6cd90770d44762075cf915
      size: 2751755
  preprocess:
    cmd: python src/stages/data_preprocessing.py
    deps:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: a0bb0f9800a91bfd0475718777999562
      size: 1201390
    - path: src/stages/data_preprocessing.py
      hash: md5
      md5: f866dcc0b0087d197e896f4bdb25c64e
      size: 4738
    params:
      params.yaml:
        split:
          method: hire_date
          train_end_date: '2023-12-31'
          test_start_date: '2024-01-01'
    outs:
    - path: data/stages/preprocessed/split_metadata.yaml
      hash: md5
      md5: 9e67d5132e56a8ac1bcb87f531c138a4
      size: 200
    - path: data/stages/preprocessed/test_data.csv
      hash: md5
      md5: 57c856539a8b7ce6b16b09498dc46529
      size: 288898
    - path: data/stages/preprocessed/train_data.csv
      hash: md5
      md5: d169e2683dca2373b6adee51064868f1
      size: 905195
