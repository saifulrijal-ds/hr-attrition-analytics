schema: '2.0'
stages:
  generate_data:
    cmd: python src/stages/data_generation.py
    deps:
    - path: src/data/data_generator.py
      hash: md5
      md5: 03975e985f012f13d569878df4f0a9b7
      size: 69080
    - path: src/stages/data_generation.py
      hash: md5
      md5: a6498f1dd34706e8ba2c443b70ef124f
      size: 2266
    params:
      params.yaml:
        attrition_scenarios:
          normal:
            rate: 0.5
            description: Normal market conditions
            is_active: false
          low_stress:
            rate: 0.35
            description: Low competition, high retention period
            is_active: false
          high_stress:
            rate: 0.65
            description: High competition or restructuring period
            is_active: true
        company:
          name: BFI Finance Indonesia
          num_employees: 4000
          historical_years: 5
          random_seed: 42
    outs:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: 644d2d3ea24c69b8da5645e08ea936e7
      size: 1189834
    - path: data/stages/raw/exit_interviews.csv
      hash: md5
      md5: 3511895e0ac72312857baf0da861835c
      size: 726229
    - path: data/stages/raw/metadata.yaml
      hash: md5
      md5: e00b50e741c2a2876f1c1ac37177ed48
      size: 252
    - path: data/stages/raw/performance.csv
      hash: md5
      md5: 004cda65827b3a85be671f05194cfa84
      size: 2490107
    - path: data/stages/raw/promotions.csv
      hash: md5
      md5: a2825f09b2cc2cdb62e80fb66e4aee47
      size: 663081
    - path: data/stages/raw/recruitment_costs.csv
      hash: md5
      md5: d3cbafe4148319ba5d11f2297c82e81a
      size: 983
    - path: data/stages/raw/surveys.csv
      hash: md5
      md5: 52563f038d3bb26c2d482a5798e4322f
      size: 4632343
    - path: data/stages/raw/training.csv
      hash: md5
      md5: eeea6e33aa9f2bcf71556072b8aced34
      size: 2919664
  preprocess:
    cmd: python src/stages/data_preprocessing.py
    deps:
    - path: data/stages/raw/employees.csv
      hash: md5
      md5: 644d2d3ea24c69b8da5645e08ea936e7
      size: 1189834
    - path: src/stages/data_preprocessing.py
      hash: md5
      md5: f866dcc0b0087d197e896f4bdb25c64e
      size: 4738
    params:
      params.yaml:
        split:
          method: hire_date
          train_end_date: '2023-12-31'
          test_start_date: '2024-01-01'
    outs:
    - path: data/stages/preprocessed/split_metadata.yaml
      hash: md5
      md5: 40052185450a88274264802ae84259a4
      size: 201
    - path: data/stages/preprocessed/test_data.csv
      hash: md5
      md5: fd0f4ba1e481946908cb53fdd828b06d
      size: 277623
    - path: data/stages/preprocessed/train_data.csv
      hash: md5
      md5: c8d5ddfed52cdf03cc74bd028606a9a7
      size: 904820
